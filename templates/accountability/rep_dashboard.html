{% extends "base.html" %}
{% set title = "Public Accountability Dashboard" %}

{% block content %}

<div class="accountability-container">

    <h2>üìä Representative Accountability Dashboard</h2>

    {% if score %}
    <div class="score-display">

        <!-- ================= FINAL SCORE ================= -->
        <div class="final-score-card">
            <h2 class="rating">{{ score.rating }}</h2>
            <div class="score-number">{{ score.final_score }}/100</div>
            <p class="formula">
                FINAL = (Accountability √ó 0.40) + (Engagement √ó 0.30) 
                + (Integrity √ó 0.20) + (Impact √ó 0.10)
            </p>
        </div>

        <!-- ================= ACCOUNTABILITY ================= -->
        <div class="dimension-card">
            <h3>üü¶ Accountability (Weight: 40%)</h3>
            <p><strong>Total:</strong> {{ score.breakdown.accountability.total }}/100</p>

            <ul>
                <li>
                    Issue Resolution Rate (50%) ‚Üí 
                    {{ score.breakdown.accountability.resolution_rate }}%
                </li>
                <li>
                    Response Time Score (25%) ‚Üí 
                    {{ score.breakdown.accountability.response_time }}/100
                </li>
                <li>
                    Citizen Satisfaction (25%) ‚Üí 
                    {{ score.breakdown.accountability.citizen_satisfaction }}%
                </li>
            </ul>
        </div>

        <!-- ================= ENGAGEMENT ================= -->
        <div class="dimension-card">
            <h3>üü© Engagement (Weight: 30%)</h3>
            <p><strong>Total:</strong> {{ score.breakdown.engagement.total }}/100</p>

            <ul>
                <li>
                    Policy Post Quality (60%) ‚Üí 
                    {{ score.breakdown.engagement.post_quality }}/100
                </li>
                <li>
                    Consistency Score (30%) ‚Üí 
                    {{ score.breakdown.engagement.consistency }}/100
                </li>
                <li>
                    Participation Depth (10%) ‚Üí 
                    {{ score.breakdown.engagement.participation_depth }}/100
                </li>
            </ul>
        </div>

        <!-- ================= INTEGRITY ================= -->
        <div class="dimension-card">
            <h3>üü® Integrity (Weight: 20%)</h3>
            <p><strong>Total:</strong> {{ score.breakdown.integrity.total }}/100</p>

            <ul>
                <li>
                    Discourse Balance Index (Primary Metric) ‚Üí 
                    {{ score.breakdown.integrity.discourse_balance }}/100
                </li>
                <li>
                    Controversy Penalty (Deduction up to -30) ‚Üí 
                    {{ score.breakdown.integrity.controversy_penalty }}
                </li>
            </ul>
        </div>

        <!-- ================= IMPACT ================= -->
        <div class="dimension-card">
            <h3>üü™ Impact (Weight: 10%)</h3>
            <p><strong>Total:</strong> {{ score.breakdown.impact.total }}/100</p>

            <ul>
                <li>
                    Constituency Engagement Index (50%) ‚Üí 
                    {{ score.breakdown.impact.constituency_engagement }}/100
                </li>
                <li>
                    Issue Scope Impact (50%) ‚Üí 
                    {{ score.breakdown.impact.issue_scope_impact }}/100
                </li>
            </ul>
        </div>

    </div>

    {% else %}
        <p>No performance data available.</p>
    {% endif %}

    <p class="hint">
        ‚ÑπÔ∏è All scores are calculated automatically using issue resolution data,
        engagement analytics, AI discourse evaluation, and behavioral metrics.
        Weightages are publicly visible for transparency.
    </p>

</div>

{% endblock %}